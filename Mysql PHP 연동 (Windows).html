<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>Mysql PHP 연동 (Windows)</title></head>
<body><h2>Mysql PHP 연동 (Windows)</h2>
<h3>Mysql 준비</h3>
<p><img src='C:\Users\우희은\AppData\Roaming\Typora\typora-user-images\1543137977124.png' alt='1543137977124' referrerPolicy='no-referrer' /></p>
<p>&nbsp;</p>
<p> 먼저, 데이터 베이스를 생성해주기 위해 cmd를 관리자 권한으로 실행시킨다.</p>
<p>&nbsp;</p>
<p><code>mysql -u &#39;유저이름&#39; -p</code></p>
<p>&nbsp;</p>
<p><img src='C:\Users\우희은\AppData\Roaming\Typora\typora-user-images\1543138043480.png' alt='1543138043480' referrerPolicy='no-referrer' /></p>
<p> mysql에 접속한다.</p>
<p>&nbsp;</p>
<p><code>mysql&gt; create database &quot;데이터베이스 이름&quot;;</code></p>
<blockquote><p>데이터 베이스를 만든다.</p>
</blockquote>
<p>&nbsp;</p>
<p><code>mysql&gt; show databases;</code> </p>
<blockquote><p>존재하는 데이터베이스 목록을 확인한다.</p>
</blockquote>
<p>&nbsp;</p>
<p><code>mysql&gt; use &quot;데이터베이스 이름&quot;;</code></p>
<blockquote><p>해당 데이터베이스 사용</p>
<p><img src='C:\Users\우희은\AppData\Roaming\Typora\typora-user-images\1543138257537.png' alt='1543138257537' referrerPolicy='no-referrer' /></p>
</blockquote>
<p>&nbsp;</p>
<p><code>mysql&gt; show tables;</code></p>
<blockquote><p>테이블 목록을 확인한다.</p>
</blockquote>
<p>&nbsp;</p>
<p><code>mysql&gt; create table inptest(&#39;첫번째 테이블 제목&#39; &#39;변수자료형&#39;, &#39;두번째 테이블 제목&#39; &#39;변수자료형&#39; ...);</code></p>
<blockquote><p>테이블을 생성한다.</p>
</blockquote>
<p>&nbsp;</p>
<p><code>mysql&gt; desc &#39;테이블 이름&#39;;</code></p>
<blockquote><p>테이블 구조 확인하기</p>
</blockquote>
<p>&nbsp;</p>
<p><img src='C:\Users\우희은\AppData\Roaming\Typora\typora-user-images\1543139719500.png' alt='1543139719500' referrerPolicy='no-referrer' /></p>
<p>&nbsp;</p>
<h3>PHP와 MySQL 연동</h3>
<p>&nbsp;</p>
<pre><code class='language-php' lang='php'>&lt;?php
    $client_secret = &quot;					&quot;; // 시크릿 키 저장

    $url = &quot;http://www.kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json&quot;; // REST 방식의 json url 따오기
   
    $target_date=&quot;20181101&quot;; // 타겟 날짜 설정
   
    $address = $url.&quot;?key=&quot;.$client_secret.&quot;&amp;targetDt=&quot;.$target_date; // 응답 예시에서 본 양식 대로 정의
   
    $contents= file_get_contents($address); // 해당 url을 string으로 읽는 함수
    $obj = json_decode($contents,true); // json 객체로 변환

    for($i=1; $i&lt;10; $i++){ // 먼저 var_dump로 구조를 읽고 차근차근 따라서 정의해 보면 됨
        $result= $obj[&quot;boxOfficeResult&quot;][&quot;dailyBoxOfficeList&quot;][$i][&quot;movieNm&quot;].&quot;&lt;br&gt;&quot;;
        print $result;
    }

    /* 여기까지 api 이용해서 데이터 추출 */

    $servername = &quot;localhost&quot;; //서버 이름
    $username = &quot;root&quot;; //유저 이름
    $password = &quot;			&quot;; //비밀번호
    $database = &quot;inp&quot;; //데이터베이스 이름

    $conn = mysqli_connect( //mysql과 연결하는 문법
        $servername,
        $username,
        $password,
        $database);

    if(!$conn){
        die(&quot;Connection failed: &quot;. mysqli_connect_error());
    }

    $sql= &quot;INSERT INTO inptest (Title) values (&#39;$result&#39;)&quot;; //요청할 명령문
    // 생성해둔 테이블에 result 저장
    // 나중에는 위에 for문에 넣어서 순서대로 저장하면 될 듯!

    $r = mysqli_query($conn,$sql);

    if($r){ // 해당 mysql과 연결해서 문법실행
        echo &quot;New record created successfully&quot;; //성공
    } else{
        echo &quot;Error: &quot;.$sql.&quot;&lt;br&gt;&quot;.mysqli_error($conn);
    }
    
    mysqli_close($conn); // 연결 종료

    /* 여기까지 mysql php 연동 */

?&gt;
</code></pre>
<p>&nbsp;</p>
<p>&lt;확인&gt;</p>
<p><img src='C:\Users\우희은\AppData\Roaming\Typora\typora-user-images\1543141000849.png' alt='1543141000849' referrerPolicy='no-referrer' /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>